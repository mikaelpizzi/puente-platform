###############################################################################
# DEV-FIRST DEFAULTS (copy to .env for local work)
###############################################################################
NODE_ENV=development
LOG_LEVEL=debug
TIMEZONE=America/Lima
GATEWAY_SHARED_SECRET=dev-gateway-secret

# -----------------------------------------------------------------------------
# Local infrastructure started via `docker compose`
# -----------------------------------------------------------------------------
POSTGRES_USER=puente
POSTGRES_PASSWORD=puente
POSTGRES_DB=puente
POSTGRES_PORT=5432

MONGO_ROOT_USER=puente
MONGO_ROOT_PASSWORD=puente
MONGO_PORT=27017

REDIS_PORT=6379

# -----------------------------------------------------------------------------
# API Gateway (NestJS)
# -----------------------------------------------------------------------------
API_GATEWAY_PORT=3000
API_GATEWAY_ALLOWED_ORIGINS=http://localhost:5173
API_GATEWAY_BASE_URL=http://localhost:3000
AUTH_SERVICE_URL=http://localhost:3001
PRODUCTS_SERVICE_URL=http://localhost:3002
FINANCE_SERVICE_URL=http://localhost:3003
LOGISTICS_SERVICE_URL=http://localhost:3004
API_GATEWAY_RATE_LIMIT_WINDOW_MS=60000
API_GATEWAY_RATE_LIMIT_MAX=60
AUTH_JWT_ACCESS_SECRET=dev-access-secret

# -----------------------------------------------------------------------------
# Auth Service (NestJS + PostgreSQL)
# -----------------------------------------------------------------------------
AUTH_SERVICE_PORT=3001
AUTH_DATABASE_URL=postgresql://puente:puente@localhost:5432/puente?schema=auth
AUTH_JWT_REFRESH_SECRET=dev-refresh-secret
AUTH_JWT_TTL=15m
AUTH_REFRESH_TTL=7d
AUTH_ARGON2_MEMORY=19456
AUTH_ARGON2_ITERATIONS=2
AUTH_ARGON2_PARALLELISM=1

# -----------------------------------------------------------------------------
# Products Service (NestJS + MongoDB)
# -----------------------------------------------------------------------------
PRODUCTS_SERVICE_PORT=3002
PRODUCTS_MONGO_DB=products
PRODUCTS_MONGO_URI=mongodb://puente:puente@localhost:27017/products?authSource=admin
PRODUCTS_SEARCH_INDEX=catalog_attributes

# -----------------------------------------------------------------------------
# Finance Service (NestJS + PostgreSQL + payment providers)
# -----------------------------------------------------------------------------
FINANCE_SERVICE_PORT=3003
FINANCE_DATABASE_URL=postgresql://puente:puente@localhost:5432/puente?schema=finance
FINANCE_LEDGER_BASE_CURRENCY=PEN
MERCADOPAGO_ACCESS_TOKEN=mp-access-token-placeholder
MERCADOPAGO_WEBHOOK_SECRET=mp-webhook-secret-placeholder
BINANCE_P2P_API_KEY=binance-api-key-placeholder
BINANCE_P2P_API_SECRET=binance-api-secret-placeholder
BINANCE_P2P_MERCHANT_ID=merchant-id-placeholder

# -----------------------------------------------------------------------------
# Logistics Service (NestJS + Redis/Valkey)
# -----------------------------------------------------------------------------
LOGISTICS_SERVICE_PORT=3004
LOGISTICS_VALKEY_URL=redis://localhost:6379
LOGISTICS_CHANNEL_ASSIGNMENTS=logistics.assignments
LOGISTICS_GEO_KEY=logistics:couriers

# -----------------------------------------------------------------------------
# Frontend (Vite/React PWA)
# -----------------------------------------------------------------------------
VITE_API_GATEWAY_URL=http://localhost:3000
VITE_MAPS_TILE_URL=https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png
VITE_RENDER_PUBLIC_URL=http://localhost:4173

# -----------------------------------------------------------------------------
# Provider tokens for automation / CI (never commit values!)
# -----------------------------------------------------------------------------
FLY_API_TOKEN=fly-token-placeholder
FLY_ORG=puente-platform
RENDER_API_KEY=render-api-key-placeholder
AIVEN_API_TOKEN=aiven-token-placeholder
MONGO_ATLAS_PUBLIC_KEY=atlas-public-key
MONGO_ATLAS_PRIVATE_KEY=atlas-private-key
PAYMENT_PROVIDER_SIGNING_KEY=payments-signing-key-placeholder

# -----------------------------------------------------------------------------
# Observability / telemetry placeholders
# -----------------------------------------------------------------------------
OTEL_EXPORTER_OTLP_ENDPOINT=https://otlp.example.com
OTEL_SERVICE_NAME=puente-platform
SENTRY_DSN=https://public@example.ingest.sentry.io/123456

# -----------------------------------------------------------------------------
# Local developer safety switches
# -----------------------------------------------------------------------------
ENABLE_FAKE_PROVIDERS=true
SEED_DEMO_DATA=false